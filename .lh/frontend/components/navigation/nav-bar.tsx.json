{
    "sourceFile": "frontend/components/navigation/nav-bar.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1741317471740,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1741320376670,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,146 @@\n+\"use client\"\n+\n+import { useState, useEffect, useRef } from \"react\"\n+import { Button } from \"@/components/ui/button\"\n+import { MobileNav } from \"./mobile-nav\"\n+import { NavLink } from \"./nav-link\"\n+import { UserMenu } from \"../navigation/user-menu\"\n+import { useAuth } from \"@/hooks/use-auth\"\n+import { useNavigationStore, useScrollStore } from \"@/lib/streams/landing.stream\"\n+import { useActiveSection } from \"@/hooks/use-active-section\"\n+import { LANDING_CONFIG } from \"@/lib/config/landing.config\"\n+import { Menu } from \"lucide-react\"\n+import { useRouter } from \"next/navigation\"\n+import { AppLogo } from \"@/components/ui/app-logo\"\n+\n+// Modificar la función NavBar para asegurar que los botones aparezcan correctamente después del logout\n+export function NavBar() {\n+  const { user, isAuthenticated } = useAuth()\n+  const { activeNavItem, setNavOpen } = useNavigationStore()\n+  const { isScrolled, setScrollPosition } = useScrollStore()\n+  const [indicatorStyle, setIndicatorStyle] = useState({ left: 0, width: 0, opacity: 0 })\n+  const navRef = useRef<HTMLDivElement>(null)\n+  const itemRefs = useRef<Map<string, HTMLElement>>(new Map())\n+  const router = useRouter()\n+\n+  // Usar el hook para activar la sección actual\n+  useActiveSection()\n+\n+  // Efecto para manejar el scroll\n+  useEffect(() => {\n+    const handleScroll = () => {\n+      setScrollPosition(window.scrollY)\n+    }\n+\n+    window.addEventListener(\"scroll\", handleScroll)\n+    return () => window.removeEventListener(\"scroll\", handleScroll)\n+  }, [setScrollPosition])\n+\n+  // Efecto para actualizar la posición del indicador cuando cambia el item activo\n+  useEffect(() => {\n+    const updateIndicator = () => {\n+      const activeElement = itemRefs.current.get(activeNavItem)\n+\n+      if (activeElement && navRef.current) {\n+        const navRect = navRef.current.getBoundingClientRect()\n+        const activeRect = activeElement.getBoundingClientRect()\n+\n+        // Calcular la posición relativa al contenedor de navegación\n+        const left = activeRect.left - navRect.left\n+\n+        setIndicatorStyle({\n+          left,\n+          width: activeRect.width,\n+          opacity: 1,\n+        })\n+      } else {\n+        // Si no hay elemento activo, ocultar el indicador\n+        setIndicatorStyle((prev) => ({ ...prev, opacity: 0 }))\n+      }\n+    }\n+\n+    // Actualizar inmediatamente y también en resize\n+    updateIndicator()\n+    window.addEventListener(\"resize\", updateIndicator)\n+\n+    return () => window.removeEventListener(\"resize\", updateIndicator)\n+  }, [activeNavItem])\n+\n+  // Obtener los elementos de navegación de forma segura\n+  const navigationItems = LANDING_CONFIG.navigation?.items || []\n+\n+  return (\n+    <header\n+      className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${\n+        isScrolled ? \"bg-black/80 backdrop-blur-md border-b border-white/10\" : \"bg-transparent\"\n+      }`}\n+    >\n+      <div className=\"container mx-auto flex h-16 items-center justify-between px-4\">\n+        {/* Botón de menú móvil (solo visible en móvil) */}\n+        <Button variant=\"ghost\" size=\"icon\" className=\"lg:hidden text-white\" onClick={() => setNavOpen(true)}>\n+          <Menu className=\"h-6 w-6\" />\n+          <span className=\"sr-only\">Abrir menú</span>\n+        </Button>\n+\n+        {/* Logo y nombre de la app (centrado en móvil) */}\n+        <div className=\"absolute left-1/2 transform -translate-x-1/2 lg:static lg:translate-x-0 lg:left-auto\">\n+          <AppLogo asLink={true} size=\"md\" />\n+        </div>\n+\n+        {/* Navegación de escritorio con indicador animado */}\n+        <div className=\"hidden lg:block relative\" ref={navRef}>\n+          <nav className=\"flex items-center gap-6\">\n+            {navigationItems.map((item) => (\n+              <NavLink\n+                key={item.href}\n+                href={item.href}\n+                isActive={activeNavItem === item.href.replace(\"#\", \"\")}\n+                ref={(el) => {\n+                  if (el) itemRefs.current.set(item.href.replace(\"#\", \"\"), el)\n+                  else itemRefs.current.delete(item.href.replace(\"#\", \"\"))\n+                }}\n+              >\n+                {item.label}\n+              </NavLink>\n+            ))}\n+\n+            {/* Indicador animado */}\n+            <div\n+              className=\"absolute -bottom-1 h-0.5 bg-gradient-to-r from-[#f80497] to-[#231c96] rounded-full transition-all duration-300 ease-in-out\"\n+              style={{\n+                left: `${indicatorStyle.left}px`,\n+                width: `${indicatorStyle.width}px`,\n+                opacity: indicatorStyle.opacity,\n+              }}\n+            />\n+          </nav>\n+        </div>\n+\n+        <div className=\"flex items-center gap-4\">\n+          {isAuthenticated ? (\n+            <UserMenu />\n+          ) : (\n+            <>\n+              <Button\n+                variant=\"outline\"\n+                className=\"hidden lg:inline-flex btn-gradient-border\"\n+                onClick={() => router.push(\"/register\")}\n+              >\n+                Registrarse\n+              </Button>\n+              <Button className=\"hidden lg:inline-flex btn-magenta\" onClick={() => router.push(\"/login\")}>\n+                Iniciar sesión\n+              </Button>\n+\n+              {/* Espacio invisible para mantener el layout en móvil */}\n+              <div className=\"w-6 lg:hidden\"></div>\n+            </>\n+          )}\n+        </div>\n+      </div>\n+\n+      <MobileNav />\n+    </header>\n+  )\n+}\n+\n"
                }
            ],
            "date": 1741317471740,
            "name": "Commit-0",
            "content": ""
        }
    ]
}