{
    "sourceFile": "frontend/components/dashboard/dashboard-nav.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1740969688402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740975388430,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,5 +44,4 @@\n       </div>\r\n     </>\r\n   )\r\n }\r\n-\r\n"
                },
                {
                    "date": 1740975402160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,4 +44,5 @@\n       </div>\r\n     </>\r\n   )\r\n }\r\n+\r\n"
                },
                {
                    "date": 1740975419499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,48 +1,96 @@\n \"use client\"\r\n \r\n-import { SystemMetrics } from \"@/components/dashboard/system-metrics\"\r\n-import { NavigationControls } from \"@/components/dashboard/navigation-controls\"\r\n-import { OrbitalControls } from \"@/components/dashboard/orbital-controls\"\r\n-import { SystemControls } from \"@/components/dashboard/system-controls\"\r\n-import { TimeStatus } from \"@/components/dashboard/time-status\"\r\n-import { SystemStatus } from \"@/components/dashboard/system-status\"\r\n-import { useRandomStars } from \"@/hooks/use-random-stars\"\r\n+import { Button } from \"@/components/ui/button\"\r\n+import { Menu, User, LogOut } from \"lucide-react\"\r\n+import { MobileNav } from \"./mobile-nav\"\r\n+import { useState, useEffect } from \"react\"\r\n+import { useRouter } from \"next/navigation\"\r\n+import Cookies from \"js-cookie\"\r\n+import {\r\n+  DropdownMenu,\r\n+  DropdownMenuContent,\r\n+  DropdownMenuItem,\r\n+  DropdownMenuLabel,\r\n+  DropdownMenuSeparator,\r\n+  DropdownMenuTrigger,\r\n+} from \"@/components/ui/dropdown-menu\"\r\n+import { Avatar, AvatarFallback } from \"@/components/ui/avatar\"\r\n \r\n-export default function DashboardPage() {\r\n-  const stars = useRandomStars(50)\r\n+export function DashboardNav() {\r\n+  const router = useRouter()\r\n+  const [showMobileMenu, setShowMobileMenu] = useState(false)\r\n+  const [userName, setUserName] = useState(\"\")\r\n \r\n+  useEffect(() => {\r\n+    const currentUser = JSON.parse(localStorage.getItem(\"currentUser\") ?? \"{}\")\r\n+    if (currentUser && currentUser.name) {\r\n+      setUserName(currentUser.name)\r\n+    }\r\n+  }, [])\r\n+\r\n+  const handleLogout = () => {\r\n+    Cookies.remove(\"auth\")\r\n+    localStorage.removeItem(\"currentUser\")\r\n+    router.push(\"/\") // Redirige a la landing page\r\n+  }\r\n+\r\n+  const handleProfile = () => {\r\n+    router.push(\"/dashboard/profile\")\r\n+  }\r\n+\r\n+  const getInitials = (name: string) => {\r\n+    return name\r\n+      .split(\" \")\r\n+      .map((part) => part[0])\r\n+      .join(\"\")\r\n+      .toUpperCase()\r\n+      .substring(0, 2)\r\n+  }\r\n+\r\n   return (\r\n     <>\r\n-      {/* Stars Background */}\r\n-      <div className=\"fixed inset-0 -z-10 overflow-hidden\">\r\n-        {stars.map((star) => (\r\n-          <div\r\n-            key={star.id}\r\n-            className={`absolute inline-flex animate-pulse ${star.color}`}\r\n-            style={{\r\n-              left: `${star.x}%`,\r\n-              top: `${star.y}%`,\r\n-              width: `${star.size}px`,\r\n-              height: `${star.size}px`,\r\n-              opacity: star.opacity,\r\n-              animation: `pulse ${star.duration}s infinite`,\r\n-            }}\r\n-          >\r\n-            <span className=\"absolute inline-flex h-full w-full animate-ping rounded-full bg-purple-400 opacity-75\" />\r\n-            <span className=\"relative inline-flex h-full w-full rounded-full bg-purple-500\" />\r\n+      <header className=\"sticky top-0 z-40 border-b border-primary/20 bg-background/60 backdrop-blur-xl\">\r\n+        <div className=\"flex h-16 items-center justify-between px-4\">\r\n+          <div className=\"flex items-center gap-4\">\r\n+            <Button variant=\"ghost\" size=\"icon\" className=\"lg:hidden\" onClick={() => setShowMobileMenu(true)}>\r\n+              <Menu className=\"h-5 w-5\" />\r\n+              <span className=\"sr-only\">Toggle menu</span>\r\n+            </Button>\r\n+            <h1 className=\"text-lg font-bold\">SPACE NAVIGATION SYSTEM</h1>\r\n           </div>\r\n-        ))}\r\n-      </div>\r\n \r\n-      <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n-        <NavigationControls />\r\n-        <SystemMetrics />\r\n-        <OrbitalControls />\r\n-        <SystemControls />\r\n-        <TimeStatus />\r\n-        <SystemStatus />\r\n-      </div>\r\n+          <DropdownMenu>\r\n+            <DropdownMenuTrigger asChild>\r\n+              <Button variant=\"ghost\" size=\"icon\" className=\"relative h-8 w-8 rounded-full\">\r\n+                <Avatar className=\"h-8 w-8\">\r\n+                  <AvatarFallback className=\"bg-primary/20 text-primary\">\r\n+                    {userName ? getInitials(userName) : \"U\"}\r\n+                  </AvatarFallback>\r\n+                </Avatar>\r\n+              </Button>\r\n+            </DropdownMenuTrigger>\r\n+            <DropdownMenuContent className=\"w-56\" align=\"end\">\r\n+              <DropdownMenuLabel className=\"font-normal\">\r\n+                <div className=\"flex flex-col space-y-1\">\r\n+                  <p className=\"text-sm font-medium leading-none\">{userName || \"Usuario\"}</p>\r\n+                </div>\r\n+              </DropdownMenuLabel>\r\n+              <DropdownMenuSeparator />\r\n+              <DropdownMenuItem onClick={handleProfile}>\r\n+                <User className=\"mr-2 h-4 w-4\" />\r\n+                <span>Perfil</span>\r\n+              </DropdownMenuItem>\r\n+              <DropdownMenuSeparator />\r\n+              <DropdownMenuItem onClick={handleLogout}>\r\n+                <LogOut className=\"mr-2 h-4 w-4\" />\r\n+                <span>Cerrar sesi√≥n</span>\r\n+              </DropdownMenuItem>\r\n+            </DropdownMenuContent>\r\n+          </DropdownMenu>\r\n+        </div>\r\n+      </header>\r\n+\r\n+      <MobileNav open={showMobileMenu} onClose={() => setShowMobileMenu(false)} />\r\n     </>\r\n   )\r\n }\r\n-\r\n"
                },
                {
                    "date": 1740976574571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n   const [userName, setUserName] = useState(\"\")\r\n \r\n   useEffect(() => {\r\n     const currentUser = JSON.parse(localStorage.getItem(\"currentUser\") ?? \"{}\")\r\n-    if (currentUser && currentUser.name) {\r\n+    if (currentUser?.name) {\r\n       setUserName(currentUser.name)\r\n     }\r\n   }, [])\r\n \r\n"
                },
                {
                    "date": 1740976590510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,12 @@\n   const [userName, setUserName] = useState(\"\")\r\n \r\n   useEffect(() => {\r\n     const currentUser = JSON.parse(localStorage.getItem(\"currentUser\") ?? \"{}\")\r\n+/*************  ‚ú® Codeium Command üåü  *************/\r\n+    if (currentUser?.name !== undefined) {\r\n     if (currentUser?.name) {\r\n+/******  f09617b4-b694-4c93-a0af-0b9c5b15b5df  *******/\r\n       setUserName(currentUser.name)\r\n     }\r\n   }, [])\r\n \r\n"
                },
                {
                    "date": 1740976615788,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,12 +22,9 @@\n   const [userName, setUserName] = useState(\"\")\r\n \r\n   useEffect(() => {\r\n     const currentUser = JSON.parse(localStorage.getItem(\"currentUser\") ?? \"{}\")\r\n-/*************  ‚ú® Codeium Command üåü  *************/\r\n     if (currentUser?.name !== undefined) {\r\n-    if (currentUser?.name) {\r\n-/******  f09617b4-b694-4c93-a0af-0b9c5b15b5df  *******/\r\n       setUserName(currentUser.name)\r\n     }\r\n   }, [])\r\n \r\n"
                },
                {
                    "date": 1740976633816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n   const [userName, setUserName] = useState(\"\")\r\n \r\n   useEffect(() => {\r\n     const currentUser = JSON.parse(localStorage.getItem(\"currentUser\") ?? \"{}\")\r\n-    if (currentUser?.name !== undefined) {\r\n+    if (currentUser && currentUser.name) {\r\n       setUserName(currentUser.name)\r\n     }\r\n   }, [])\r\n \r\n"
                }
            ],
            "date": 1740969688402,
            "name": "Commit-0",
            "content": "\"use client\"\r\n\r\nimport { SystemMetrics } from \"@/components/dashboard/system-metrics\"\r\nimport { NavigationControls } from \"@/components/dashboard/navigation-controls\"\r\nimport { OrbitalControls } from \"@/components/dashboard/orbital-controls\"\r\nimport { SystemControls } from \"@/components/dashboard/system-controls\"\r\nimport { TimeStatus } from \"@/components/dashboard/time-status\"\r\nimport { SystemStatus } from \"@/components/dashboard/system-status\"\r\nimport { useRandomStars } from \"@/hooks/use-random-stars\"\r\n\r\nexport default function DashboardPage() {\r\n  const stars = useRandomStars(50)\r\n\r\n  return (\r\n    <>\r\n      {/* Stars Background */}\r\n      <div className=\"fixed inset-0 -z-10 overflow-hidden\">\r\n        {stars.map((star) => (\r\n          <div\r\n            key={star.id}\r\n            className={`absolute inline-flex animate-pulse ${star.color}`}\r\n            style={{\r\n              left: `${star.x}%`,\r\n              top: `${star.y}%`,\r\n              width: `${star.size}px`,\r\n              height: `${star.size}px`,\r\n              opacity: star.opacity,\r\n              animation: `pulse ${star.duration}s infinite`,\r\n            }}\r\n          >\r\n            <span className=\"absolute inline-flex h-full w-full animate-ping rounded-full bg-purple-400 opacity-75\" />\r\n            <span className=\"relative inline-flex h-full w-full rounded-full bg-purple-500\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n        <NavigationControls />\r\n        <SystemMetrics />\r\n        <OrbitalControls />\r\n        <SystemControls />\r\n        <TimeStatus />\r\n        <SystemStatus />\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\n"
        }
    ]
}